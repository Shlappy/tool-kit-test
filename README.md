# Тестовое задание для Tool-Kit

## Возможности приложения
- Регистрироваться путем заполнения анкеты
- Создавать заявления для рассмотрения администратором
- Просматривать собственные заявления
- Просматривать все заявления администратором

## Инструкция

1. Клонировать репозиторий и перейти в созданную папку *tool-kit*:
    ```bash
    git clone https://github.com/Shlappy/tool-kit-test.git tool-kit
    ```
2. Собрать, поднять все контейнеры и запустить сервер:
    ```bash
    make build-start-prod
    ```
3. Готово, теперь можно использовать приложение. Для этого нужно перейти по адресу:
    ```bash
    http://localhost
    ```
---

Если нужно сменить порт, можно сделать это в .env файле, ключ WEB_PORT_HTTP,
и пересобрать контейнеры.
Тогда нужно зайти по адресу:
```bash
http://localhost:port
```
где port - указанный в .env порт.

#### Для входа за админа в prod-режиме:
Логин - admin@test.ru<br>
Пароль - 123456

#### Для входа за клиента в prod-режиме:
Логин - client@test.ru<br>
Пароль - 123456

#### Для входа за второго клиента в prod-режиме:
Логин - client2@test.ru<br>
Пароль - 123456

---
## Справка

#### Swagger документация по пути:
```bash
http://localhost/api/doc
```
#### Json schema по пути:
```bash
http://localhost/api/doc.json
```
---
#### Для остановки всех контейнеров в prod-режиме:
```bash
make stop-prod
```
#### Для остановки всех контейнеров в dev-режиме:
```bash
make stop-dev
```

#### Для запуска без сборки в prod-режиме ввести команду:
```bash
make start-prod
```

#### Для накатывания фикстур dev-режима:<br>! После этого все старые данные в БД будут удалены !
```bash
# Если не запущен прод-режим, то пропустить команду
make stop-prod
# Пропустить, если уже запущены контейнеры в dev-режиме
make build-start-dev #или make start-dev если dev-контейнеры уже собраны
make fixtures-dev
```

#### Для запуска тестов:
```bash
# Если не запущен прод-режим, то пропустить команду
make stop-prod
# Пропустить, если уже запущены контейнеры в dev-режиме
make build-start-dev #или make start-dev если dev-контейнеры уже собраны
make test
```

#### Для запуска phpstan:
```bash
# Если не запущен прод-режим, то пропустить команду
make stop-prod
# Пропустить, если уже запущены контейнеры в dev-режиме
make build-start-dev #или make start-dev если dev-контейнеры уже собраны
make phpstan
```

#### Для запуска phpcs:
```bash
# Если не запущен прод-режим, то пропустить команду
make stop-prod
# Пропустить, если уже запущены контейнеры в dev-режиме
make build-start-dev #или make start-dev если dev-контейнеры уже собраны
make phpcs
```
#### Чтобы снова запустить prod-режим, если был запущен dev-режим:
```bash
make stop-dev
make build-start-prod
```
---
### Примечания:
- Макс. размер загружаемого файла - 8 МБ
- **make phpcs** выдаст "ошибки" стандарта PSR-12, которые в версии PHP 8.4 
нет возможности исправить с помощью php-cs-fixer. Для исправления 
всех ошибок нужна версия PHP меньше 8.4
